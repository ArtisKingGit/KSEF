<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 8 Books - Dawamu School Bookshop</title>
    <link rel="stylesheet" href="form2.css">
    <link rel="icon" href="bookshop_logo.png" type="image/svg+xml">
</head>
<body>
        <header>
            <h1>Books Available</h1>
            <button onclick="goBack()" class="go-back-btn">Go Back</button>
        </header>
    <div class="card-container">
        
        <div class="card">
            <img src="images (13).jpeg" alt="Murray Reeve" class="profile-img">
            <h2>Top Scholar Mathematics</h2>
            
            <div class="social-icons">
                <i class="fab fa-instagram"></i>
                <i class="fab fa-heart"></i>
                <i class="fab fa-linkedin"></i>
                <i class="fab fa-share-alt"></i>
            </div>
            <button class="btn follow" onclick="placeOrder('Top Scholar Mathematics Grade 8')">Take book</button>
        </div>

      
        <div class="card">
            <img src="images (1).jpeg" alt="KLB COMPUTER FORM 2
            " class="profile-img">
            <h2>Top Scholar Integrated Science</h2>
           
            <div class="social-icons">
                <i class="fab fa-instagram"></i>
                <i class="fab fa-heart"></i>
                <i class="fab fa-linkedin"></i>
                <i class="fab fa-share-alt"></i>
            </div>
            <button class="btn follow" onclick="placeOrder('Top Scholar Integrated Science Grade 8')">Take book</button>
        </div>

        <div class="card">
            <img src="images (2).jpeg" alt="Murray Reeve" class="profile-img">
            <h2>Top Scholar Social Studies</h2>
            
            <div class="social-icons">
                <i class="fab fa-instagram"></i>
                <i class="fab fa-heart"></i>
                <i class="fab fa-linkedin"></i>
                <i class="fab fa-share-alt"></i>
            </div>
            <button class="btn follow" onclick="placeOrder('Top Scholar Social Studies Grade 8')">Take book</button>
        </div>

        <div class="card">
            <img src="images (3).jpeg" alt="Murray Reeve" class="profile-img">
            <h2>Top Scholar CRE</h2>
            
            <div class="social-icons">
                <i class="fab fa-instagram"></i>
                <i class="fab fa-heart"></i>
                <i class="fab fa-linkedin"></i>
                <i class="fab fa-share-alt"></i>
            </div>
            <button class="btn follow" onclick="placeOrder('Top Scholar CRE Grade 8')">Take book</button>
        </div>

        <div class="card">
            <img src="images (14).jpeg" alt="Murray Reeve" class="profile-img">
            <h2>Top Scholar English</h2>
            
            <div class="social-icons">
                <i class="fab fa-instagram"></i>
                <i class="fab fa-heart"></i>
                <i class="fab fa-linkedin"></i>
                <i class="fab fa-share-alt"></i>
            </div>
            <button class="btn follow" onclick="placeOrder('Top Scholar English Grade 8')">Take book</button>
        </div>
    </div>
    <script>
        function goBack() {
            window.history.back();
        }
    </script>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
    import {
      getAuth,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";
    import {
      getDatabase,
      ref,
      push
    } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB58Kkz8NqFBC3ZKeq-ehs35RJ5uCcb2TM",
      authDomain: "register-f5448.firebaseapp.com",
      databaseURL: "https://register-f5448-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "register-f5448",
      storageBucket: "register-f5448.appspot.com",
      messagingSenderId: "321470396528",
      appId: "1:321470396528:web:a82520483006d1a56e9cb5",
      measurementId: "G-4Z3S1GJS6G"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    window.placeOrder = function (bookName) {
      onAuthStateChanged(auth, user => {
        if (user) {
          const ordersRef = ref(db, 'orders/' + user.uid);
          push(ordersRef, {
            bookName: bookName,
            quantity: 1,
            status: 'Pending',
            timestamp: new Date().toISOString()
          }).then(() => {
            alert("Order placed for " + bookName + "!");
            console.log("Order placed!");
          }).catch(err => {
            console.error("Order error: ", err.message);
          });
        } else {
          alert("You must be logged in to place an order.");
          window.location.href = "login.html";
        }
      });
    };
  </script>
</body>
</html>
